<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Shift Reducer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="favicon.ico">

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/bootstrap-responsive.min.css" rel="stylesheet">
    <link href="css/ribbon.css" rel="stylesheet">
    <link href="css/css.css" rel="stylesheet">
    <link href="css/demo.css" rel="stylesheet">

    <link href="http://fonts.googleapis.com/css?family=Source+Code+Pro:400,700" rel="stylesheet" type="text/css"/>

    <!-- highlight.js -->
    <link href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/styles/magula.min.css" rel="stylesheet"/>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <style>
      #demo1 .editor {
        width: 60%;
      }
      #demo1 .output-container {
        width: 40%;
      }
      #demo1 .output {
        font-family: Source Code Pro, DejaVu Sans Mono, Droid Sans Mono, Courier New, Courier, monospace;
        font-size: 21px;
        padding: 1em;
        white-space: pre;
      }
      #demo1 .go-button {
        position: absolute;
        right: 1em;
        top: 1em;
      }
    </style>

    <script src="bower_components/ace-builds/src-min/ace.js"></script>
    <script src="js/shift-parser.js"></script>
    <script src="js/shift-reducer.js"></script>
    <script src="js/babel.js"></script>
    <script>var MonoidalReducer = reducer.MonoidalReducer;</script>
  </head>

  <body>
    <div class="ribbon-container right">
      <div class="ribbon">
        <a href="https://github.com/shapesecurity/shift-reducer-js" target="_blank">Fork me on GitHub</a>
      </div>
    </div>

    <div class="container">
      <div class="content">

        <div class="masthead">
          <h3><a href="./index.html" class="muted hub-link">part of the Shift suite</a></h3>
        </div>

        <div class="jumbotron">
          <h1><span class="shift">Shift</span> Reducer</h1>
          <p class="lead">
            a framework for defining a bottom-up summarisation of a Shift AST
          </p>
        </div>

        <hr />

        <h3>Demo</h3>

        <p>
          In this demo, a reducer is given on the left, and run against itself.
          The final reduction state is displayed as JSON on the right. Be sure
          to define the reducer as the module's default export. ECMAScript 2015
          syntax may be used.
        </p>

        <div class="demo" id="demo1">
<div class="editor" spellcheck="false">let EMPTY;
class Collector {
  constructor(x) { this.value = x; }
  static empty() { return EMPTY; }
  concat(a) { return new Collector(this.value.concat(a.value)); }
}
EMPTY = new Collector([]);

export default class IdentifierCollector extends MonoidalReducer {
  static collect(program) {
    return reduce(new this, program).value;
  }

  constructor() {
    super(Collector);
  }

  reduceIdentifierExpression(node, state) {
    return new Collector([node.name]);
  }
}</div>
          <div class="output-container">
            <div class="output json"></div>
            <div class="error-message"></div>
          </div>
          <button class="btn btn-primary btn-lg go-button" type="button">RUN</button>
          <script src="js/reducer/main.js"></script>
        </div>
      </div>

      <hr />

      <div class="footer">
        <p>&copy; 2015 Shape Security, Inc.</p>
      </div>
    </div>


  </body>
</html>
